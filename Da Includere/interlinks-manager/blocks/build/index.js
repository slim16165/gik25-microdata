!function(){"use strict";var e=window.wp.element;const{TextControl:t}=wp.components,{SelectControl:n}=wp.components,{dispatch:i,select:a}=wp.data,{PluginDocumentSettingPanel:s}=wp.editor,{Component:r}=wp.element,{__:__}=wp.i18n,{registerPlugin:l}=wp.plugins;l("daim-interlinks-options",{icon:!1,render:class extends r{constructor(e){super(...arguments),this.state={seoPower:"",enableAil:"text"}}componentDidMount(){const e=a("core/editor").getEditedPostAttribute("meta");let t=e._daim_seo_power,n=e._daim_enable_ail;""!==t&&void 0!==t||(t=window.DAIM_PARAMETERS.default_seo_power),""!==n&&void 0!==n||(n=window.DAIM_PARAMETERS.enable_ail),this.setState({seoPower:t,enableAil:n})}render(){return 1!==parseInt(window.DAIM_PARAMETERS.user_has_interlinks_options_mb_required_capability,10)||1!==parseInt(window.DAIM_PARAMETERS.interlinks_options_is_active_in_post_type,10)?null:(0,e.createElement)(s,{name:"interlinks-manager",title:__("Interlinks Options","interlinks-manager")},(0,e.createElement)(t,{label:__("SEO Power","interlinks-manager"),type:"number",help:__("Control the amount of link juice assigned to the internal links of this post.","interlinks-manager"),value:this.state.seoPower,onChange:e=>{i("core/editor").editPost({meta:{_daim_seo_power:e}}),this.setState({seoPower:e})},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,className:"daim-interlinks-options-custom-margin"}),(0,e.createElement)(n,{label:__("Enable AIL","interlinks-manager"),help:__("Enable or disable auto internal links for this post.","interlinks-manager"),value:this.state.enableAil,options:[{label:__("No","interlinks-manager"),value:"0"},{label:__("Yes","interlinks-manager"),value:"1"}],onChange:e=>{i("core/editor").editPost({meta:{_daim_enable_ail:e}}),this.setState({enableAil:e})},__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))}}});const{Button:o}=wp.components,{dispatch:m,select:c}=wp.data,{PluginDocumentSettingPanel:u}=wp.editor,{Component:d,createRef:p}=wp.element,{__:g}=wp.i18n,{registerPlugin:_}=wp.plugins;_("daim-interlinks-suggestions",{icon:!1,render:class extends d{constructor(e){super(...arguments),this.state={suggestions:[]},this.hiddenInputRef=p()}handleCopyButtonClick=e=>{const t=document.querySelector(`.daim-suggestion-link[data-index="${e}"]`);if(t){const e=t.getAttribute("href");if(this.hiddenInputRef.current&&(this.hiddenInputRef.current.value=e,this.hiddenInputRef.current)){this.hiddenInputRef.current.select(),document.execCommand("copy");const e="daim-link-copied-notice";wp.data.dispatch("core/notices").createNotice("success","Copied link to clipboard.",{id:e,isDismissible:!0,type:"snackbar"}),setTimeout((()=>{wp.data.dispatch("core/notices").removeNotice(e)}),2e3)}}};renderSuggestions(){return Array.isArray(this.state.suggestions)&&0!==this.state.suggestions.length?this.state.suggestions.map(((t,n)=>(0,e.createElement)("div",{className:"daim-interlinks-suggestions-item",key:n},(0,e.createElement)("div",{className:"daim-interlinks-suggestions-container-left"},(0,e.createElement)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"daim-suggestion-link","data-index":n+1},t.icon_svg&&(0,e.createElement)("span",{className:"daim-suggestion-icon",dangerouslySetInnerHTML:{__html:t.icon_svg}}),(0,e.createElement)("span",{className:"daim-suggestion-title"},t.title),(0,e.createElement)("span",{className:"components-external-link__icon","aria-label":"(opens in a new tab)"},"↗")),(0,e.createElement)("span",{className:"daim-interlinks-suggestions-post-type"},t.post_type)),(0,e.createElement)("div",{className:"daim-interlinks-suggestions-copy-button","data-index":n+1,onClick:()=>this.handleCopyButtonClick(n+1),"aria-label":"Copy"},(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.625 5.5h9.75c.069 0 .125.056.125.125v9.75a.125.125 0 0 1-.125.125h-9.75a.125.125 0 0 1-.125-.125v-9.75c0-.069.056-.125.125-.125ZM4 5.625C4 4.728 4.728 4 5.625 4h9.75C16.273 4 17 4.728 17 5.625v9.75c0 .898-.727 1.625-1.625 1.625h-9.75A1.625 1.625 0 0 1 4 15.375v-9.75Zm14.5 11.656v-9H20v9C20 18.8 18.77 20 17.251 20H6.25v-1.5h11.001c.69 0 1.249-.528 1.249-1.219Z"})))))):(0,e.createElement)("p",null,g('There are no interlink suggestions available. Please ensure you have at least five other posts that meet the criteria defined in the "Suggestions" options.',"interlinks-manager"))}render(){return 1!==parseInt(window.DAIM_PARAMETERS.user_has_interlinks_suggestions_mb_required_capability,10)||1!==parseInt(window.DAIM_PARAMETERS.interlinks_suggestions_is_active_in_post_type,10)?null:(0,e.createElement)(u,{name:"interlinks-manager",title:g("Interlinks Suggestions","interlinks-manager")},(0,e.createElement)("div",{className:"daim-container"},(0,e.createElement)("input",{type:"text",ref:this.hiddenInputRef,style:{position:"absolute",left:"-9999px"},readOnly:!0}),(0,e.createElement)("div",{id:"daim-meta-message"},this.state.suggestions.length>0||this.state.suggestions.message?this.renderSuggestions():(0,e.createElement)("p",null,g('Click the "Generate" button multiple times until you find posts suitable to be used as internal links.',"interlinks-manager"))),(0,e.createElement)("div",{className:"daim-buttons-container"},(0,e.createElement)(o,{variant:"secondary",className:"editor-post-trash daim-generate-file-button",onClick:()=>{const e=parseInt(document.getElementById("post_ID").value,10);wp.apiFetch({path:"/interlinks-manager-pro/v1/generate-interlinks-suggestions",method:"POST",data:{id:e}}).then((e=>{e.error||this.setState({suggestions:e})}))}},g("Generate","interlinks-manager")))))}}});const{Button:h}=wp.components,{PluginDocumentSettingPanel:k}=wp.editor,{useState:w,useEffect:E}=wp.element,{__:b}=wp.i18n;wp.apiFetch;const{registerPlugin:f}=wp.plugins;f("daim-interlinks-optimization",{icon:!1,render:()=>{if(1!==parseInt(window.DAIM_PARAMETERS.user_has_interlinks_optimization_mb_required_capability,10))return null;if(1!==parseInt(window.DAIM_PARAMETERS.interlinks_optimization_is_active_in_post_type,10))return null;const[t,n]=w(null);return E((()=>{const e=parseInt(document.getElementById("post_ID").value,10),t=()=>{wp.apiFetch({path:"/interlinks-manager-pro/v1/generate-interlinks-optimization",method:"POST",data:{id:e}}).then((e=>{n(e)})).catch((e=>{console.error("Error fetching interlinks optimization data:",e)}))};t();let i=!1;const a=wp.data.subscribe((()=>{const e=wp.data.select("core/editor").isSavingPost(),n=wp.data.select("core/editor").isAutosavingPost();!i||e||n||t(),i=e}));return()=>{a()}}),[]),(0,e.createElement)(k,{name:"interlinks-manager",title:b("Interlinks Optimization","interlinks-manager")},(0,e.createElement)("div",{className:"daim-container"},(0,e.createElement)("div",{className:"daim-meta-message"},t?(()=>{const n=t.total_number_of_interlinks,i=t.number_of_manual_interlinks,a=t.number_of_autolinks,s=t.suggested_min_number_of_interlinks,r=t.suggested_max_number_of_interlinks;return n>=s&&n<=r?(0,e.createElement)("p",null,b("The number of internal links in this post is optimized.","interlinks-manager")):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,b("Please optimize the number of internal links. This post currently contains","interlinks-manager")," ",n," ",b(1===n?"internal link":"internal links","interlinks-manager"),". (",i," ",b(1===i?"manual internal link":"manual internal links","interlinks-manager")," ",b("and","interlinks-manager")," ",a," ",b(1===a?"auto internal link":"auto internal links","interlinks-manager"),")"),s===r?(0,e.createElement)("p",null,b("Based on the content length and your settings, the ideal number of internal links should be","interlinks-manager")," ",s,"."):(0,e.createElement)("p",null,b("Based on the content length and your settings, the ideal number of internal links should fall between","interlinks-manager")," ",s," ",b("and","interlinks-manager")," ",r,"."))})():(0,e.createElement)("p",null))))}})}();