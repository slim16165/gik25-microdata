(()=>{"use strict";const e=window.React,t=wp.element.useMemo,a="...",n=(e,t)=>{let a=t-e+1;return Array.from({length:a},((t,a)=>a+e))};var r;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}var i,s=function(t){return e.createElement("svg",l({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r||(r=e.createElement("path",{d:"m18 17-5-5 5-5m-7 10-5-5 5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}var o,m=function(t){return e.createElement("svg",c({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i||(i=e.createElement("path",{d:"m15 18-6-6 6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}var g,u=function(t){return e.createElement("svg",d({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),o||(o=e.createElement("path",{d:"m9 18 6-6-6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h.apply(this,arguments)}var p=function(t){return e.createElement("svg",h({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),g||(g=e.createElement("path",{d:"m6 17 5-5-5-5m7 10 5-5-5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};const E=r=>{const{onPageChange:l,totalCount:i,siblingCount:c=1,currentPage:o,pageSize:d}=r,g=(({totalCount:e,pageSize:r,siblingCount:l=1,currentPage:i})=>t((()=>{const t=Math.ceil(e/r);if(l+5>=t)return n(1,t);const s=Math.max(i-l,1),c=Math.min(i+l,t),o=s>2,m=c<t-2,d=t;if(!o&&m)return[...n(1,3+2*l),a,t];if(o&&!m){let e=n(t-(3+2*l)+1,t);return[1,a,...e]}if(o&&m){let e=n(s,c);return[1,a,...e,a,d]}}),[e,r,l,i]))({currentPage:o,totalCount:i,siblingCount:c,pageSize:d});if(0===o||g.length<2)return null;let h=g[g.length-1];return(0,e.createElement)("ul",{className:"pagination-container"},(0,e.createElement)("li",{className:"pagination-item "+(1===o?"disabled":""),onClick:()=>{l(1)},key:-2},(0,e.createElement)(s,null)),(0,e.createElement)("li",{className:"pagination-item "+(1===o?"disabled":""),onClick:()=>{1!==o&&l(o-1)},key:-1},(0,e.createElement)(m,null)),g.map((t=>t===a?(0,e.createElement)("li",{className:"pagination-item dots",key:crypto.randomUUID()},"â€¦"):(0,e.createElement)("li",{key:t,className:"pagination-item "+(t===o?"selected":""),onClick:()=>l(t)},t))),(0,e.createElement)("li",{className:"pagination-item "+(o===h?"disabled":""),onClick:()=>{o!==h&&l(o+1)},key:h+1},(0,e.createElement)(u,null)),(0,e.createElement)("li",{className:"pagination-item "+(o===h?"disabled":""),onClick:()=>{l(h)},key:h+2},(0,e.createElement)(p,null)))},k=wp.element.useState,b=wp.element.useMemo,{__}=wp.i18n;let _=window.DAIM_PARAMETERS.items_per_page;const v=t=>{const[a,n]=k(1),r=b((()=>{const e=(a-1)*_,n=e+_;return t.data.slice(e,n)}),[a,t.data]);function l(e){return t.formData.sortingColumn===e?t.formData.sortingOrder:""}return(0,e.createElement)("div",{className:"daim-data-table-container"},(0,e.createElement)("table",{className:"daim-react-table__daim-data-table daim-react-table__daim-data-table-hits-menu"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"id","data-icon":l("id")},__("Tracking ID","interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"post_title","data-icon":l("post_title")},__("Post","interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"date","data-icon":l("date")},__("Date","interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"target_url","data-icon":l("target_url")},__("Target","interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"link_type","data-icon":l("link_type")},__("Type","interlinks-manager"))))),(0,e.createElement)("tbody",null,r.map((t=>(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",null,t.id),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daim-react-table__post-cell-container"},(0,e.createElement)("a",{href:t.post_permalink},t.post_title),(0,e.createElement)("a",{href:t.post_permalink,target:"_blank",className:"daim-react-table__icon-link"}),(0,e.createElement)("a",{href:t.post_edit_link,className:"daim-react-table__icon-link"}))),(0,e.createElement)("td",null,t.formatted_date),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daim-react-table__post-cell-container"},(0,e.createElement)("a",{href:t.target_url},t.target_url),(0,e.createElement)("a",{href:t.target_url,target:"_blank",className:"daim-react-table__icon-link"}))),(0,e.createElement)("td",null,0===parseInt(t.link_type,10)?__("AIL","interlinks-manager"):__("MIL","interlinks-manager"))))))),0===t.data.length&&(0,e.createElement)("div",{className:"daim-no-data-found"},__("We couldn't find any results matching your filters. Try adjusting your criteria.","interlinks-manager")),t.data.length>0&&(0,e.createElement)("div",{className:"daim-react-table__pagination-container"},(0,e.createElement)("div",{className:"daext-displaying-num"},t.data.length+" items"),(0,e.createElement)(E,{className:"pagination-bar",currentPage:a,totalCount:t.data.length,pageSize:_,onPageChange:e=>n(e)})))},f=t=>(0,e.createElement)("div",{className:"loading-screen"},(0,e.createElement)("div",{className:"loading-screen__wrapper"},(0,e.createElement)("div",{className:"loading-screen__content"},(0,e.createElement)("div",{className:"loading-screen__spinner-container"},(0,e.createElement)("div",{className:"loading-screen__spinner"})),(0,e.createElement)("div",{className:"loading-screen__text"},void 0!==t.dataUpdateRequired&&t.dataUpdateRequired?t.generatingDataMessage:t.loadingDataMessage)))),w=wp.element.useState,C=wp.element.useEffect,{__:N}=wp.i18n,{render:y}=wp.element,{createRoot:O}=wp.element,S=document.getElementById("react-root"),j=(0,e.createElement)((()=>{const[t,a]=w({searchString:"",searchStringChanged:!1,sortingColumn:"id",sortingOrder:"desc"}),[n,r]=w(!0),[l,i]=w([]),[s,c]=w({allClicks:0,autolinksPercentage:0});return C((()=>{r(!0),wp.apiFetch({path:"/interlinks-manager-pro/v1/hits",method:"POST",data:{search_string:t.searchString,sorting_column:t.sortingColumn,sorting_order:t.sortingOrder}}).then((e=>{i(e.table),c({allClicks:e.statistics.all_clicks,autolinksPercentage:e.statistics.autolinks_percentage}),r(!1)}))}),[t.searchStringChanged,t.sortingColumn,t.sortingOrder]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(React.StrictMode,null,n?(0,e.createElement)(f,{loadingDataMessage:N("Loading data...","interlinks-manager")}):(0,e.createElement)("div",{className:"daim-react-table"},(0,e.createElement)("div",{className:"daim-react-table-header"},(0,e.createElement)("div",{className:"statistics"},(0,e.createElement)("div",{className:"statistic-label"},N("All clicks","interlinks-manager"),":"),(0,e.createElement)("div",{className:"statistic-value"},s.allClicks),(0,e.createElement)("div",{className:"statistic-label"},N("Autolinks","interlinks-manager")," %:"),(0,e.createElement)("div",{className:"statistic-value"},s.autolinksPercentage)),(0,e.createElement)("div",{className:"tools-actions"},(0,e.createElement)("button",{onClick:()=>{wp.apiFetch({path:"/interlinks-manager-pro/v1/hits-menu-export-csv",method:"POST"}).then((e=>{((e,t)=>{const a=e,n=window.URL.createObjectURL(new Blob([a])),r=document.createElement("a");r.href=n;const l="hits-"+Date.now().toString().slice(0,10)+".csv";r.setAttribute("download",l),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)})(e.csv_content)}))},...0===l.length?{disabled:"disabled"}:{}},N("Export","interlinks-manager")))),(0,e.createElement)("div",{className:"daim-react-table__daim-filters daim-react-table__daim-filters-hits-menu"},(0,e.createElement)("div",{className:"daim-search-container"},(0,e.createElement)("input",{onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("daim-search-button").click())},type:"text",placeholder:N("Filter by title or target","interlinks-manager"),value:t.searchString,onChange:e=>a({...t,searchString:e.target.value})}),(0,e.createElement)("input",{id:"daim-search-button",className:"daim-btn daim-btn-secondary",type:"submit",value:N("Search","interlinks-manager"),onClick:()=>a({...t,searchStringChanged:!t.searchStringChanged})}))),(0,e.createElement)(v,{data:l,handleSortingChanges:function(e){let n=t.sortingOrder;t.sortingColumn===e.target.value&&(n="asc"===t.sortingOrder?"desc":"asc"),a({...t,sortingColumn:e.target.value,sortingOrder:n})},formData:t}))))}),null);S&&(O?O(S).render(j):y(j,S))})();