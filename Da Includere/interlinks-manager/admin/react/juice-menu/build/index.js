(()=>{"use strict";const e=window.React,t=wp.element.useMemo,a="...",n=(e,t)=>{let a=t-e+1;return Array.from({length:a},((t,a)=>a+e))};var r;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}var i,s=function(t){return e.createElement("svg",l({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r||(r=e.createElement("path",{d:"m18 17-5-5 5-5m-7 10-5-5 5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}var m,o=function(t){return e.createElement("svg",c({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i||(i=e.createElement("path",{d:"m15 18-6-6 6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}var u,g=function(t){return e.createElement("svg",d({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),m||(m=e.createElement("path",{d:"m9 18 6-6-6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E.apply(this,arguments)}var h=function(t){return e.createElement("svg",E({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),u||(u=e.createElement("path",{d:"m6 17 5-5-5-5m7 10 5-5-5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};const p=r=>{const{onPageChange:l,totalCount:i,siblingCount:c=1,currentPage:m,pageSize:d}=r,u=(({totalCount:e,pageSize:r,siblingCount:l=1,currentPage:i})=>t((()=>{const t=Math.ceil(e/r);if(l+5>=t)return n(1,t);const s=Math.max(i-l,1),c=Math.min(i+l,t),m=s>2,o=c<t-2,d=t;if(!m&&o)return[...n(1,3+2*l),a,t];if(m&&!o){let e=n(t-(3+2*l)+1,t);return[1,a,...e]}if(m&&o){let e=n(s,c);return[1,a,...e,a,d]}}),[e,r,l,i]))({currentPage:m,totalCount:i,siblingCount:c,pageSize:d});if(0===m||u.length<2)return null;let E=u[u.length-1];return(0,e.createElement)("ul",{className:"pagination-container"},(0,e.createElement)("li",{className:"pagination-item "+(1===m?"disabled":""),onClick:()=>{l(1)},key:-2},(0,e.createElement)(s,null)),(0,e.createElement)("li",{className:"pagination-item "+(1===m?"disabled":""),onClick:()=>{1!==m&&l(m-1)},key:-1},(0,e.createElement)(o,null)),u.map((t=>t===a?(0,e.createElement)("li",{className:"pagination-item dots",key:crypto.randomUUID()},"â€¦"):(0,e.createElement)("li",{key:t,className:"pagination-item "+(t===m?"selected":""),onClick:()=>l(t)},t))),(0,e.createElement)("li",{className:"pagination-item "+(m===E?"disabled":""),onClick:()=>{m!==E&&l(m+1)},key:E+1},(0,e.createElement)(g,null)),(0,e.createElement)("li",{className:"pagination-item "+(m===E?"disabled":""),onClick:()=>{l(E)},key:E+2},(0,e.createElement)(h,null)))},v=(e,t)=>{const a=e,n=window.URL.createObjectURL(new Blob([a])),r=document.createElement("a");r.href=n;const l=t+"-"+Date.now().toString().slice(0,10)+".csv";r.setAttribute("download",l),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)},b=wp.element.useState,w=wp.element.useMemo,{__}=wp.i18n;let N=window.DAIM_PARAMETERS.items_per_page;const k=t=>{const[a,n]=b(1),r=w((()=>{const e=(a-1)*N,n=e+N;return t.data.slice(e,n)}),[a,t.data]);function l(e){return t.formData.sortingColumn===e?t.formData.sortingOrder:""}return(0,e.createElement)("div",{className:"daim-data-table-container"},(0,e.createElement)("table",{className:"daim-react-table__daim-data-table daim-react-table__daim-data-table-juice-menu"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"url","data-icon":l("url")},__("URL","interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"iil","data-icon":l("iil")},__("Internal Inbound Links","interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daim-react-table__daim-sorting-button",onClick:t.handleSortingChanges,value:"juice","data-icon":l("juice")},__("Juice","interlinks-manager"))),(0,e.createElement)("th",null))),(0,e.createElement)("tbody",null,r.map((a=>{return(0,e.createElement)("tr",{key:a.id},(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daim-react-table__post-cell-container"},(0,e.createElement)("a",{href:a.url},a.url),(0,e.createElement)("a",{href:a.url,target:"_blank",className:"daim-react-table__icon-link"}))),(0,e.createElement)("td",null,a.iil),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"juice-relative-wrapper"},(0,e.createElement)("div",{className:"juice-relative-container"},(0,e.createElement)("div",{className:"juice-relative",style:{width:a.juice_relative+"%"}})),(0,e.createElement)("div",{className:"juice-value"},(n=a.juice)>1e12?(n/1e12).toFixed(1)+"T":n>1e9?(n/1e9).toFixed(1)+"B":n>1e6?(n/1e6).toFixed(1)+"M":n>1e3?(n/1e3).toFixed(1)+"K":parseInt(n,10).toFixed(0)))),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"button-actions-container"},(0,e.createElement)("button",{className:"small-button",onClick:()=>t.urlDetailsViewHandler(a.id,a.url)},"Details View"),(0,e.createElement)("button",{className:"small-button",onClick:()=>{return e=a.url,void wp.apiFetch({path:"/interlinks-manager-pro/v1/anchors-menu-export-csv",method:"POST",data:{url:e}}).then((e=>{v(e.csv_content,"anchors")}));var e}},"Export"))));var n})))),0===t.data.length&&(0,e.createElement)("div",{className:"daim-no-data-found"},__("We couldn't find any results matching your filters. Try adjusting your criteria.","interlinks-manager")),t.data.length>0&&(0,e.createElement)("div",{className:"daim-react-table__pagination-container"},(0,e.createElement)("div",{className:"daext-displaying-num"},t.data.length+" items"),(0,e.createElement)(p,{className:"pagination-bar",currentPage:a,totalCount:t.data.length,pageSize:N,onPageChange:e=>n(e)})))},_=wp.element.useState,D=wp.element.useMemo,{__:y}=wp.i18n;let j=window.DAIM_PARAMETERS.items_per_page;const I=t=>{const[a,n]=_(1),r=D((()=>{const e=(a-1)*j,n=e+j;return t.data.slice(e,n)}),[a,t.data]);return(0,e.createElement)("div",{className:"daim-data-table-container"},(0,e.createElement)("table",{className:"daim-react-table__daim-data-table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,y("Post","interlinks-manager")),(0,e.createElement)("th",null,y("Anchor Text","interlinks-manager")),(0,e.createElement)("th",null,y("Juice","interlinks-manager")))),(0,e.createElement)("tbody",null,r.map((t=>{return(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daim-react-table__post-cell-container"},(0,e.createElement)("a",{href:t.postPermalink},t.postTitle),(0,e.createElement)("a",{href:t.postPermalink,target:"_blank",className:"daim-react-table__icon-link"}),(0,e.createElement)("a",{href:t.postEditLink,className:"daim-react-table__icon-link"}))),(0,e.createElement)("td",null,t.anchor),(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"juice-relative-wrapper"},(0,e.createElement)("div",{className:"juice-relative-container"},(0,e.createElement)("div",{className:"juice-relative",style:{width:t.juiceVisual+"%"}})),(0,e.createElement)("div",{className:"juice-value"},(a=t.juice)>1e12?(a/1e12).toFixed(1)+"T":a>1e9?(a/1e9).toFixed(1)+"B":a>1e6?(a/1e6).toFixed(1)+"M":a>1e3?(a/1e3).toFixed(1)+"K":parseInt(a,10).toFixed(0)))));var a})))),(0,e.createElement)("div",{className:"daim-react-table__pagination-container"},(0,e.createElement)("div",{className:"daext-displaying-num"},t.data.length+" items"),(0,e.createElement)(p,{className:"pagination-bar",currentPage:a,totalCount:t.data.length,pageSize:j,onPageChange:e=>n(e)})))},C=t=>(0,e.createElement)("div",{className:"loading-screen"},(0,e.createElement)("div",{className:"loading-screen__wrapper"},(0,e.createElement)("div",{className:"loading-screen__content"},(0,e.createElement)("div",{className:"loading-screen__spinner-container"},(0,e.createElement)("div",{className:"loading-screen__spinner"})),(0,e.createElement)("div",{className:"loading-screen__text"},void 0!==t.dataUpdateRequired&&t.dataUpdateRequired?t.generatingDataMessage:t.loadingDataMessage)))),f=wp.element.useState,M=wp.element.useEffect,{__:S}=wp.i18n,{render:O}=wp.element,{createRoot:x}=wp.element,A=document.getElementById("react-root"),L=(0,e.createElement)((()=>{const[t,a]=f({urlDetailsView:!1,urlDetailsViewId:0,urlDetailsViewUrl:"",searchString:"",searchStringChanged:!1,sortingColumn:"juice",sortingOrder:"desc"}),[n,r]=f(!0),[l,i]=f(!1),[s,c]=f([]),[m,o]=f({allUrls:0,averageIil:0,averageJuice:0});function d(e){let n=t.sortingOrder;t.sortingColumn===e.target.value&&(n="asc"===t.sortingOrder?"desc":"asc"),a({...t,sortingColumn:e.target.value,sortingOrder:n})}function u(e,n){a({...t,urlDetailsView:!0,urlDetailsViewId:e,urlDetailsViewUrl:n})}return M((()=>{t.urlDetailsView||(r(!0),wp.apiFetch({path:"/interlinks-manager-pro/v1/juice",method:"POST",data:{search_string:t.searchString,sorting_column:t.sortingColumn,sorting_order:t.sortingOrder,data_update_required:l}}).then((e=>{c(e.table),o({allPosts:e.statistics.all_urls,averageMil:e.statistics.average_iil,averageAil:e.statistics.average_juice}),l&&(i(!1),a({urlDetailsView:!1,urlDetailsViewId:0,urlDetailsViewUrl:"",searchString:"",searchStringChanged:!1,sortingColumn:"juice_relative",sortingOrder:"desc"})),r(!1)})))}),[t.searchStringChanged,t.sortingColumn,t.sortingOrder,t.urlDetailsView,l]),M((()=>{t.urlDetailsView&&wp.apiFetch({path:"/interlinks-manager-pro/v1/juice-url",method:"POST",data:{id:t.urlDetailsViewId}}).then((e=>{c(e)}))}),[t.urlDetailsView]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(React.StrictMode,null,n?(0,e.createElement)(C,{loadingDataMessage:S("Loading data...","interlinks-manager"),generatingDataMessage:S("Data is being generated. For large sites, this process may take several minutes. Please wait...","interlinks-manager"),dataUpdateRequired:l}):(0,e.createElement)(e.Fragment,null,!t.urlDetailsView&&(0,e.createElement)("div",{className:"daim-react-table"},(0,e.createElement)("div",{className:"daim-react-table-header"},(0,e.createElement)("div",{className:"statistics"},(0,e.createElement)("div",{className:"statistic-label"},S("All URLs","interlinks-manager"),":"),(0,e.createElement)("div",{className:"statistic-value"},m.allPosts)," Average",(0,e.createElement)("div",{className:"statistic-label"},S("IIL","interlinks-manager"),":"),(0,e.createElement)("div",{className:"statistic-value"},m.averageMil)," Average",(0,e.createElement)("div",{className:"statistic-label"},S("Juice","interlinks-manager"),":"),(0,e.createElement)("div",{className:"statistic-value"},m.averageAil)),(0,e.createElement)("div",{className:"tools-actions"},(0,e.createElement)("button",{onClick:e=>{i((e=>!e))}},(0,e.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyIDEwQzIyIDEwIDE5Ljk5NSA3LjI2ODIyIDE4LjM2NjIgNS42MzgyNEMxNi43MzczIDQuMDA4MjcgMTQuNDg2NCAzIDEyIDNDNy4wMjk0NCAzIDMgNy4wMjk0NCAzIDEyQzMgMTYuOTcwNiA3LjAyOTQ0IDIxIDEyIDIxQzE2LjEwMzEgMjEgMTkuNTY0OSAxOC4yNTQzIDIwLjY0ODIgMTQuNU0yMiAxMFY0TTIyIDEwSDE2IiBzdHJva2U9IiM0NzU0NjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:"button-icon"}),S("Update metrics","interlinks-manager")),(0,e.createElement)("button",{onClick:()=>{wp.apiFetch({path:"/interlinks-manager-pro/v1/juice-menu-export-csv",method:"POST"}).then((e=>{v(e.csv_content,"juice")}))},...0===s.length?{disabled:"disabled"}:{}},S("Export","interlinks-manager")))),(0,e.createElement)("div",{className:"daim-react-table__daim-filters daim-react-table__daim-filters-juice-menu"},(0,e.createElement)("div",{className:"daim-search-container"},(0,e.createElement)("input",{onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("daim-search-button").click())},type:"text",placeholder:S("Filter by URL","interlinks-manager"),value:t.searchString,onChange:e=>a({...t,searchString:e.target.value})}),(0,e.createElement)("input",{id:"daim-search-button",className:"daim-btn daim-btn-secondary",type:"submit",value:S("Search","interlinks-manager"),onClick:()=>a({...t,searchStringChanged:!t.searchStringChanged})}))),(0,e.createElement)(k,{data:s,handleSortingChanges:d,formData:t,urlDetailsViewHandler:u})),t.urlDetailsView&&(0,e.createElement)("div",{className:"daim-react-table url-details-view"},(0,e.createElement)("div",{className:"daim-react-table-header"},(0,e.createElement)("div",null,S("Internal Inbound Links for","interlinks-manager")+" "+t.urlDetailsViewUrl),(0,e.createElement)("a",{className:"daim-back-button",onClick:()=>a({...t,urlDetailsView:!1,urlDetailsViewId:0})},String.fromCharCode(8592)," ",S("Back","interlinks-manager"))),(0,e.createElement)(I,{data:s,handleSortingChanges:d,formData:t,urlDetailsViewHandler:u})))))}),null);A&&(x?x(A).render(L):O(L,A))})();